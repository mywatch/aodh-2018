<!DOCTYPE html>
<html>

<head>
    <title>Sentiments in AR</title>
    <meta name="description" content="Sentiments in AR">
    <script src="https://aframe.io/releases/0.8.2/aframe.min.js"></script>
    <script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
    <!-- script type="”text/javascript”" src="”https://underscorejs.org/underscore-min.js”"></script> -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.6.0/underscore.js" type="text/javascript"></script>
    <script src="https://unpkg.com/aframe-animation-component@%5E3.2.x/dist/aframe-animation-component.min.js"></script>
    <link rel="stylesheet" type="text/css" href="style.css">
    <script>
        AFRAME.registerComponent('alpha-test', {
            dependencies: ['material'],
            init: function () {
                var material = this.el.getObject3D('mesh').material;
                material.alphaTest = 0.1;
                material.needsUpdate = true;
            }
        });
        AFRAME.registerComponent('audiohandler', {
            init: function () {
                let playing = false;
                let audio = this.el.components.sound;
                this.el.setAttribute("src", "");
                           < !--https://cdn.glitch.com/526fa6b3-3951-416b-9299-9d67e301c050%2F13%20Visitation%20(Exit).mp3 -->

                var btn = document.getElementById("btn");
                btn.addEventListener('mousedown', () => {

                    if (!playing) {
                        audio.playSound();
                        btn.innerHTML = 'Audio Stop';
                    } else {
                        audio.stopSound();
                        btn.innerHTML = 'Audio Play';
                    }
                    playing = !playing;
                });
            }
        })
    </script>

</head>

<body>
    <button id="btn">Audio Play</button>
    <a-scene id="scene1" cursor="rayOrigin:mouse" fog="type: linear; color: #fff; near:1000; far:6000">
        <a-assets>https://cdn.glitch.com/0d293ae3-91f0-498c-9dfb-d8f39627bcd7%2Fsegnet_sample.png?1531566210180
            <img id="transpImage" src="https://cdn.glitch.com/091d82cc-e7ff-446c-9cab-6d502030e780%2F01_result_masked_flipped.png?1531738859480">
            <img id="fixedImage" src="https://cdn.glitch.com/091d82cc-e7ff-446c-9cab-6d502030e780%2F01_flipped.jpg?1531738862761">
            <img id="ceiling_image" src="https://cdn.glitch.com/1d01423c-a6de-49b3-8db9-cc8ddbbc3e9c%2Ftaipei_map.jpeg?1531567716629">
            <img id="transp_ceiling_image" src="https://cdn.glitch.com/3e2d651c-2275-4b78-9253-d8e73225ae94%2Ftaipei_map_by_photoshop.png?1531712554823">
        </a-assets>
        <a-entity id="buildings" position="0 0 0" geometry="primitive: sphere; radius: 100" material="color:#cff;
                            shader: flat; 
                            src: #transpImage;
                            side: back" transparent="true" alpha-test="0.5">
        </a-entity>
        <a-entity id="buildings_with_sky" position="0 0 0" geometry="primitive: sphere; radius: 4000" material="color:#cff;
                            shader: flat; 
                            src: #fixedImage;
                            side: back">
        </a-entity>
        <a-sound audiohandler id="lightSphere" volume="500" autoplay="false" geometry="primitive: sphere; radius: 0.5f" intensity="50"
            light="type: point; color: #cff; intensity: 0.5" position="0 300 -500" animation="property: position; to: 0 400 -500; dir: alternate; loop: true"></a-sound>
        <!--         <a-image position = "0 1000 -1" width="5000" height="5000" src="#transp_ceiling_image" transparent="true" rotation="90 0 0" color= "#0ff"></a-image> -->
        <a-image position="0 1000 -1" width="6000" height="6000" src="#ceiling_image" opacity="0.5" rotation="90 0 0" color="#0ff"></a-image>
    </a-scene>
    <div id="aframe-code"></div>
</body>

</html>
<!--side: back;>